e = campaignTrail_temp;

        	nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#040404";

        	nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#171717";

        	document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;

        	$("#game_window")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;

        	$(".container")[0].style.backgroundColor = "#000040";

        	document.getElementById("header").src = "https://i.imgur.com/180jaPG.png";

        	document.body.background = "https://i.imgur.com/PXilSLo.jpg";

        	e.election_json = [{"model":"campaign_trail.election","pk":10,"fields":{"year":1976,"summary":"1976: Rerun<br><br>After four years of corruption, fear and loathing, another presidential election is due. Nixon's resignation, the ailing economy and troubles abroad are the main issues.<br><br><ul><li>Humphrey is the man of the hour, with his credibility, especially among the Middle Class, boosted by Nixon's resignation and his tough-on-crime rebrand.<br><br><ul><li>Weicker isn't loved by any means by the nuts and kooks, but he might be the only one that can show that the GOP is still the party of honesty and integrity.<br><br>","image_url":"https://i.imgur.com/Oa0cWNo.jpg","winning_electoral_vote_number":270,"advisor_url":"https://i.imgur.com/XpFz34J.jpg","recommended_reading":"<ul>\n<li><a href=https://www.chicagotribune.com/opinion/editorials/ct-edit-chicago-tribune-biden-endorsement-20200925-lnyxsb5qvrftnjjmj3rnzj33jy-story.html>Our Case For Joe Biden</a></li>\n<li><a href=https://nationalinterest.org/feature/case-trump-166808>The Case For Trump</a></li>\n<li><a href=https://www.npr.org/2020/11/18/935730100/how-biden-won-ramping-up-the-base-and-expanding-margins-in-the-suburbs>How Biden Won: Ramping Up The Base And Expanding Margins In The Suburbs</a></li>\n<li><a href=https://www.prospectmagazine.co.uk/politics/donald-trump-joe-biden-us-election-almost-win-votes-concede>Why Did Trump Almost Win?</a></li>\n<li><a href=https://www.hoover.org/research/no-evidence-voter-fraud-guide-statistical-claims-about-2020-election>No Evidence For Voter Fraud: A Guide To Statistical Claims About The 2020 Election</a></li>\n</ul>","has_visits":1,"no_electoral_majority_image":"../static/images/2012-no-majority.jpg"}}];e.temp_election_list = [{"id":10,"year":1976,"is_premium":0,"display_year":"1976 Rerun"}];e.credits = "Hazelson";e.global_parameter_json = [{"model":"campaign_trail.global_parameter","pk":1,"fields":{"vote_variable":1.125,"max_swing":0.12,"start_point":0.94,"candidate_issue_weight":10,"running_mate_issue_weight":3,"issue_stance_1_max":-0.71,"issue_stance_2_max":-0.3,"issue_stance_3_max":-0.125,"issue_stance_4_max":0.125,"issue_stance_5_max":0.3,"issue_stance_6_max":0.71,"global_variance":0.01,"state_variance":0.005,"question_count":25,"default_map_color_hex":"#C9C9C9","no_state_map_color_hex":"#999999"}}];e.candidate_json = [{"model":"campaign_trail.candidate","pk":1001,"fields":{"first_name":"Hubert Horatio","last_name":"Humphrey","election":10,"party":"Democratic","state":"Minnesota","priority":1,"description":"Hubert Horatio Humphrey is a storied man. The man who stood up for civil rights all the way back in 1948. The man who fought valiantly for the Great Society. The man who came back from the pits of electoral hell to nearly win against Nixon. That man has changed. <br><br>The new Hubert Humphrey has seen America ruled by a crook, no better than a common criminal in the road to achieve his goals. He saw the chaos on campus sites, where America's brightest caused mayhem and rioted against it. He saw the war and strife abroad, with Vietnam leaving a hole in the public's conscious that will stay there for a long time. <br><br>But he hasn't deviated from the track. He still fights for the average American who works, pays his taxes, and continues to make his country better. And he will make sure he wins for them, <i>because America needs him.<i></div></div></div>","color_hex":"#000071","secondary_color_hex":null,"is_active":1,"image_url":"https://www.bu.edu/hhh/files/2019/11/mn_1980_humphrey_older.jpg","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":null,"candidate_score":1,"running_mate":false,"scrollable":false,"partner":""}},{"model":"campaign_trail.candidate","pk":1002,"fields":{"first_name":"Moon ","last_name":"Landrieu","election":10,"party":"Democratic","state":"Louisiana","priority":1,"description":"Landrieu is the current mayor of New Orleans and the president of the United States Conference of Mayors. He has seen the desegregation city government, with African-American city employees numbers doubling. He acquired funds from the Federal Government, and used it revitalize and revive the city's poor neighborhoods.<br><br>You might be asking, why him? Why some no-name Mayor from New Orleans? Well, with your new Law and Order rebrand and the current state of the GOP, especially with the nomination of a potential candidate, you might have a big break down South despite your history. Plus, he's young and healthy, and some voters would like that considering you worsening health.","color_hex":"#0000ff","secondary_color_hex":null,"is_active":0,"image_url":"https://d2mjvz2lqjkhe7.cloudfront.net/as/assets-mem-com/cmi/4/2/9/3/10913924/20220908_171256859_0_orig.jpg/-/moon-landrieu-new-orleans-la-obituary.jpg?crop=%2855.65245901639344%2C16.916666666666664%2C283.1016393442623%2C296.04166666666663%29&cropxunits=369&cropyunits=464","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":"Landrieu is the current mayor of New Orleans and the president of the United States Conference of Mayors. He has seen the desegregation city government, with African-American city employees numbers doubling. He acquired funds from the Federal Government, and used it revitalize and revive the city's poor neighborhoods.<br><br>You might be asking, why him? Why some no-name Mayor from New Orleans? Well, with your new Law and Order rebrand and the current state of the GOP, especially with the nomination of a potential candidate, you might have a big break down South despite your history. Plus, he's young and healthy, and some voters would like that considering you worsening health.","candidate_score":1,"running_mate":true,"scrollable":false,"partner":"0"}},{"model":"campaign_trail.candidate","pk":1003,"fields":{"first_name":"Henry \"Scoop\" ","last_name":"Jackson","election":10,"party":"Democratic","state":"Washington","priority":1,"description":"There is a lot of things to be said about Washington's junior senator. He is the epitome of the term \"Liberal Hawk\". A man both caring for the poor and the need to stop communism abroad. Or maybe you just know him \"w**re for Boeing\".<br><br>Jackson would bring decades of experience to the ticket, which would solidly land the Democrats as the party of \"getting things done\" considering your likely opponent. He is also a Law and Order type, and would reinforce you new image in the South. <br><br>Aside from all this, he is a staunch fiscal liberal. The Pacific Coast would also shift towards you if you pick him.","color_hex":"#0000ff","secondary_color_hex":null,"is_active":0,"image_url":"https://i.prcdn.co/img?regionKey=fXyhPkZXS1V0ngXZr%2BSUdw%3D%3D","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":"There is a lot of things to be said about Washington's junior senator. He is the epitome of the term \"Liberal Hawk\". A man both caring for the poor and the need to stop communism abroad. Or maybe you just know him \"w**re for Boeing\".<br><br>Jackson would bring decades of experience to the ticket, which would solidly land the Democrats as the party of \"getting things done\" considering your likely opponent. He is also a Law and Order type, and would reinforce you new image in the South. <br><br>Aside from all this, he is a staunch fiscal liberal. The Pacific Coast would also shift towards you if you pick him.","candidate_score":1,"running_mate":true,"scrollable":false,"partner":"0"}},{"model":"campaign_trail.candidate","pk":1004,"fields":{"first_name":"Jimmy ","last_name":"Carter","election":10,"party":"Democratic","state":"Georgia","priority":1,"description":"Up until a few months ago, Jimmy Carter was a no name governor down South. He was a part of a newer trend of Southern Governors that are respectful and supportive of Civil Rights, sure, but he wasn't a particularly notable example of it. That all changed after Iowa.<br><br>Carter has been on your tail since the start of the primaries, espousing his moral character and outsider status to win voters so desperate of change, coming in second after all was said and done.<br><br>He is very moderate considering the standards of the party, but would safeguard  the South when November comes around.<br><br>But let's be honest here, Hubert, your health isn't the best. If anything were to happen to you, would you want him to be president?","color_hex":"#0000ff","secondary_color_hex":null,"is_active":0,"image_url":"https://imgc.artprintimages.com/img/print/marion-s-trikosko-president-jimmy-carter-announces-sanctions-against-iran-in-retaliation-for-taking-us-hostages-1980_u-l-q1byha20.jpg?background=f3f3f3","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":"Up until a few months ago, Jimmy Carter was a no name governor down South. He was a part of a newer trend of Southern Governors that are respectful and supportive of Civil Rights, sure, but he wasn't a particularly notable example of it. That all changed after Iowa.<br><br>Carter has been on your tail since the start of the primaries, espousing his moral character and outsider status to win voters so desperate of change, coming in second after all was said and done.<br><br>He is very moderate considering the standards of the party, but would safeguard  the South when November comes around.<br><br>But let's be honest here, Hubert, your health isn't the best. If anything were to happen to you, would you want him to be president?","candidate_score":1,"running_mate":true,"scrollable":false,"partner":"0"}}];e.running_mate_json = [{"model":"campaign_trail.running_mate","pk":2001,"fields":{"candidate":1001,"running_mate":1002}},{"model":"campaign_trail.running_mate","pk":2002,"fields":{"candidate":1001,"running_mate":1003}},{"model":"campaign_trail.running_mate","pk":2003,"fields":{"candidate":1001,"running_mate":1004}}];
// Initialise custom music

$("#music_player")[0].children[0].style.display="none"
$("#music_player")[0].children[1].style.display="none"

document.getElementById("modLoadReveal").style.display="none"
document.getElementById("modloaddiv").style.display="none"

musicBox = document.getElementById("music_player")
musicBox.style.display=""

var trackSel;
e = campaignTrail_temp
e.selectedSoundtrack = 0

toTime = (seconds) => {
  var date = new Date(null);
  date.setSeconds(seconds);
  return date.toISOString().substr(11, 8);
}

generateTime = () => {
    // Get the audio element
    var audio = document.getElementById("campaigntrailmusic");

    timeTracker = document.createElement("div");
    timeTracker.style = `
      text-align:left;
      border-style:solid;
      border-width:3px;
      height:150px;
      width:200px;
      background-color:#999999;
      float:right;
      padding: 10px;
    `
    $("#trackSelParent")[0].prepend(timeTracker);
    $("#trackSelParent")[0].prepend(document.createElement("br"));

    // Create a new element to display the current position of the audio
    var positionDisplay = document.createElement("gg");
    positionDisplay.id = "position-display";

    // Create a new slider element to change the time
    var timeSlider = document.createElement("input");
    timeSlider.type = "range";
    timeSlider.min = 0;
    timeSlider.max = 1;
    timeSlider.step = 0.001;
    timeSlider.value = 0;
    timeSlider.style.width = "200px";
    timeSlider.id = "time-slider";

    var pausePlay = document.createElement("button");
    pausePlay.id = "position-display";
    pausePlay.innerHTML = "<b>Pause</b>"
    pausePlay.style.width = "100%";


    pausePlay.addEventListener("click", event => {
      event.preventDefault();
      updatePositionDisplay();
      let audio = document.getElementById("campaigntrailmusic");
      if (audio.paused) {
        audio.play();
        event.target.innerHTML = "<b>Pause</b>";
        return;
      }
      audio.pause();
      event.target.innerHTML = "<b>Play</b>";
      return;
    })

    var volumeLabel = document.createElement("gg");
    volumeLabel.id = "volume-label";
    volumeLabel.innerHTML = "<br><b>Volume: </b>"

    var volumeSlider = document.createElement("input");
    volumeSlider.type = "range";
    volumeSlider.min = 0;
    volumeSlider.max = 1;
    volumeSlider.step = 0.001;
    volumeSlider.value = 0;
    volumeSlider.style.width = "200px";
    volumeSlider.id = "volume-slider";

    volumeSlider.value = audio.volume;

    timeTracker.appendChild(pausePlay);
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(positionDisplay);
    timeTracker.appendChild(timeSlider);
    timeTracker.appendChild(volumeLabel);
    timeTracker.appendChild(volumeSlider);

    updatePositionDisplay();

    //for (let i = 0; i < 10; i++)
    //timeTracker.append(document.createElement("br"));


    // Function to update the position display
    function updatePositionDisplay() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      timeSlider.value = audio.duration ? audio.currentTime / audio.duration : 0;
    }

    // Function to change the time of the audio
    function changeTime() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      audio.currentTime = timeSlider.value * audio.duration;
    }

    updateVolume = event => {
      audio.volume = event.target.value;
    }
    
    // Update the position display and slider every second
    setInterval(updatePositionDisplay, 1000);

    // Listen for changes to the time slider and change the time of the audio
    timeSlider.addEventListener("input", changeTime);
    volumeSlider.addEventListener("input", updateVolume)
}

function newMusicPlayer() {
  trackSel = document.createElement("div");
  trackSel.id = "trackSelParent"
  let z = `<br><br><br><br><br><br><br><br><br><br><div id='trackSel' style="text-align:left;border-style:solid;border-width:3px;overflow-y: scroll;overflow-x: hidden;height:200px; width:400px;background-color:#999999;float:right;">`
  z += `<b><select id='selectSoundtrack'><option value='`+soundtracks[e.selectedSoundtrack].name+`'>`+soundtracks[e.selectedSoundtrack].name+"</option>"
  for (i in soundtracks) {
    if (soundtracks[e.selectedSoundtrack] != soundtracks[i]) {
      z += `<option value='`+soundtracks[i].name+`'>`+soundtracks[i].name+`</option>`
    }
  }
  z += `</select></b><br><br>`
  // <label><input type="radio" name="option" value="option1">Option 1</label><br>
  for (i in soundtracks[e.selectedSoundtrack].tracklist) {
    let a = soundtracks[e.selectedSoundtrack].tracklist[i]
    let b = `<label><input class="trackSelector" type="radio" name="trackSelector" value="`+i+`">`+a.name+`</label><br>`
    z += b
  }
  z += "</div><br><br>"
  trackSel.innerHTML = z

  // select correct song

  musicBox.appendChild(trackSel);
  Array.from(document.getElementById("trackSel").children).filter(f=>{
    return f.tagName == "LABEL"
  }).map(f=>f.children[0])[0].checked = true

  // set soundtrack changer

  soundtrackSelector = document.getElementById("selectSoundtrack")
  soundtrackSelector.onchange = function() {
    for (i in soundtracks) {
      if (soundtracks[i].name == soundtrackSelector.value) {
        e.selectedSoundtrack = i
        break
      }
    }
    document.getElementById("trackSelParent").remove()
    newMusicPlayer()
  }

  var matches = document.querySelectorAll('.trackSelector');

  for (match in matches) {
    matches[match].onchange = function() {
      audio = $("#campaigntrailmusic")[0];
      audio.src = soundtracks[e.selectedSoundtrack].tracklist[this.value].url
      audio.currentTime = 0
    }
  }

  musicBox.children[2].loop = false
  musicBox.children[2].src = soundtracks[e.selectedSoundtrack].tracklist[0].url

  musicBox.children[2].onended = function() {
    console.log("next track")
    let selected = Number(document.querySelector('input[name="trackSelector"]:checked').value);
    let newSel = clamp(selected+1, soundtracks[e.selectedSoundtrack].tracklist.length-1, 0)
    let buttons = Array.from(document.getElementById("trackSel").children).filter(f=>{
      return f.tagName == "LABEL"
    }).map(f=>f.children[0])
    //let selectedIndex = buttons.map(f=>f.children[0]).map(f=>f.checked)
    buttons[newSel].click()
  }

  for (w = 0; w < 7; w++) {
    document.getElementById("trackSelParent").appendChild(document.createElement("br"))
  }
  
  generateTime();
}

clamp = function(a, max, min, overflow=true) {
  if (overflow) {
    return a > max ? min : a < min ? max : a;
  }
  return a > max ? max : a < min ? min : a;
}


// Track list

var soundtracks = {
  0: {
    name: "Theme",
    tracklist: [
      {
        "name": "",
        "url": "https://cdn.discordapp.com/attachments/810034515334004766/1074235125669298196/b1.mp3"
      },
      {
        "name": "Dmitri Shostakovich - Waltz No. 2",
        "url": "https://www.youtube.com/watch?v=mmCnQDUSO4I"
      },
      {
        "name": "Debussy - Clair De Lune",
        "url": "https://www.youtube.com/watch?v=WNcsUNKlAKw"
      },
      {
        "name": “Bach - Badinerie Suite No.2",
        "url": "https://www.youtube.com/watch?v=x04g3gzH7HA"
      }
    ]
  }
}

// Set up new music player

newMusicPlayer()

